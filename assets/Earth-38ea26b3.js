import{r as t,j as e,C as x,O as b,A as j,k as y,c as w,F as E}from"./vendor-f7cc1bad.js";import{V as v}from"./three-vendor-1ac9e373.js";import{u as R,L as I}from"./index-bb76c2c2.js";import"./motion-vendor-5d707dde.js";const S=({visible:o=!0})=>{const i=y("./planet/scene.gltf"),n=t.useRef(null),a=t.useRef(.25),u=t.useRef(new v(0,0,0)),s=2.5;return w(({clock:l})=>{const r=n.current;if(!r)return;const d=o?1:.05,f=.08;a.current+=(d-a.current)*f,r.scale.setScalar(s*a.current);const p=l.getElapsedTime();r.rotation.y=p*.12;const c=o?0:-1;r.position.y+=(c-r.position.y)*.12}),t.useEffect(()=>{n.current&&(n.current.position.copy(u.current).add(new v(0,-1,0)),n.current.scale.setScalar(s*a.current))},[]),e.jsx(E,{speed:1.25,rotationIntensity:.1,floatIntensity:.12,floatingRange:[0,.05],children:e.jsx("group",{ref:n,children:e.jsx("primitive",{object:i.scene,position:[0,0,0],"rotation-y":0})})})},L=({sectionIndex:o=6})=>{const[i,n]=t.useState(!1),[a,u]=t.useState(!1),s=t.useRef(null),{suspendAboveOf:l,exclusiveSection:r}=R(),d=r!==null&&o!==r,f=l!==null&&o<l,p=d||f;return t.useEffect(()=>{const c=window.matchMedia("(max-width: 820px)");u(c.matches);const m=h=>{u(h.matches)};c.addEventListener("change",m);const g=new IntersectionObserver(([h])=>{n(h.isIntersecting)},{threshold:.1});return s.current&&g.observe(s.current),()=>{c.removeEventListener("change",m),s.current&&g.unobserve(s.current)}},[]),p?e.jsx("div",{style:{width:"100%",height:"100%"}}):e.jsx("div",{ref:s,style:{width:"100%",height:"100%"},children:i&&e.jsxs(x,{shadows:!0,frameloop:"demand",dpr:[1,1.25],gl:{preserveDrawingBuffer:!1,antialias:!1,powerPreference:"high-performance"},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:[e.jsxs(t.Suspense,{fallback:e.jsx(I,{}),children:[e.jsx(b,{enabled:!a,autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),e.jsx(S,{visible:i})]}),e.jsx(j,{pixelated:!0})]})})};export{L as default};
