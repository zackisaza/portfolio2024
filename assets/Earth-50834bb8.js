import{r,j as e,C as y,O as E,A as j,h as R,b as w,F as I}from"./vendor-9229993e.js";import{f as b}from"./three-vendor-bf31962e.js";import{f as L,g as S}from"./index-cd57e659.js";import"./motion-vendor-fcaeed3e.js";const A=({visible:i=!0})=>{const u=R("./planet/scene.gltf"),o=r.useRef(null),t=r.useRef(.25),d=r.useRef(new b(0,0,0)),a=2.5;return w(({clock:f})=>{const s=o.current;if(!s)return;const p=i?1:.05,h=.08;t.current+=(p-t.current)*h,s.scale.setScalar(a*t.current);const v=f.getElapsedTime();s.rotation.y=v*.12;const c=i?0:-1;s.position.y+=(c-s.position.y)*.12}),r.useEffect(()=>{o.current&&(o.current.position.copy(d.current).add(new b(0,-1,0)),o.current.scale.setScalar(a*t.current))},[]),e.jsx(I,{speed:1.25,rotationIntensity:.1,floatIntensity:.12,floatingRange:[0,.05],children:e.jsx("group",{ref:o,children:e.jsx("primitive",{object:u.scene,position:[0,0,0],"rotation-y":0})})})},D=({sectionIndex:i=6})=>{const[u,o]=r.useState(!1),t=r.useRef(null),d=r.useRef(null),a=r.useRef(null),{suspendAboveOf:f,exclusiveSection:s}=L(),p=s!==null&&i!==s,h=f!==null&&i<f,v=p||h;return r.useEffect(()=>{const c=new IntersectionObserver(([n])=>{o(n.isIntersecting)},{threshold:.1});return t.current&&c.observe(t.current),()=>{if(t.current&&c.unobserve(t.current),a.current)try{a.current()}catch{}}},[]),v?e.jsx("div",{style:{width:"100%",height:"100%"}}):e.jsx("div",{ref:t,style:{width:"100%",height:"100%"},children:u&&e.jsxs(y,{shadows:!0,frameloop:"demand",dpr:[1,1.25],onCreated:c=>{try{const n=c.gl,l=n.domElement;d.current=l;const m=g=>{try{g.preventDefault()}catch{}},x=()=>{};l.addEventListener("webglcontextlost",m,!1),l.addEventListener("webglcontextrestored",x,!1),a.current=()=>{try{l.removeEventListener("webglcontextlost",m),l.removeEventListener("webglcontextrestored",x)}catch{}try{n&&typeof n.dispose=="function"&&n.dispose()}catch{}}}catch{}},gl:{preserveDrawingBuffer:!1,antialias:!1,powerPreference:"high-performance"},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:[e.jsxs(r.Suspense,{fallback:e.jsx(S,{}),children:[e.jsx(E,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),e.jsx(A,{visible:u})]}),e.jsx(j,{pixelated:!0})]})})};export{D as default};
