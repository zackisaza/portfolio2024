import{r as s,j as t}from"./vendor-9229993e.js";import{u as R,t as _,a as E,b as T,c as A,d as C,e as z,T as k,L as M}from"./index-cd57e659.js";import{A as O,m as i}from"./motion-vendor-fcaeed3e.js";import"./three-vendor-bf31962e.js";const V={hidden:{opacity:0},show:{opacity:1},exit:{opacity:0}},B={hidden:{opacity:0,scale:.9,y:40},show:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:320,damping:28}},exit:{opacity:0,scale:.92,y:20,transition:{duration:.2}}},J=()=>{const{hasPreference:m,t:d,setLanguage:p,language:u}=R(),[f,g]=s.useState(!1),[N,x]=s.useState([]);s.useEffect(()=>{},[m,f]),s.useEffect(()=>{const e=a=>{a.key==="Escape"&&(m||p("en"),g(!1))};return f&&typeof window<"u"&&window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,m,p]),s.useEffect(()=>{let e=!1;if(typeof window<"u")try{new URLSearchParams(window.location.search).get("showLanguagePrompt")==="1"&&(e=!0),window.localStorage.getItem("debugShowLanguagePrompt")==="1"&&(e=!0)}catch{}const a=setTimeout(()=>{g(!0)},1500);return()=>clearTimeout(a)},[]);const[n,I]=s.useState(null),[h,b]=s.useState(20),[L,S]=s.useState(!1);s.useEffect(()=>{const e=()=>{S(window.matchMedia("(min-width: 768px)").matches)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const D=e=>{p(e),n&&clearTimeout(n),b(20);const a=setTimeout(()=>{g(!1)},2e4);I(a)};s.useEffect(()=>()=>{n&&clearTimeout(n)},[n]),s.useEffect(()=>{if(n&&h>0){const e=setInterval(()=>{b(a=>a-1)},1e3);return()=>clearInterval(e)}},[n,h]);const j=e=>{if(e.target===e.currentTarget){const a=e.currentTarget.getBoundingClientRect();let l,r;e.touches&&e.touches[0]?(l=e.touches[0].clientX-a.left,r=e.touches[0].clientY-a.top):(l=e.clientX-a.left,r=e.clientY-a.top);const c={x:l,y:r,id:Date.now()};x(o=>[...o,c]),setTimeout(()=>{m||p("en"),g(!1)},300),setTimeout(()=>{x(o=>o.filter(y=>y.id!==c.id))},800)}},v=e=>{if(!e.target.closest("[data-language-toggle]")){const r=e.currentTarget.parentElement.getBoundingClientRect();let c,o;e.touches&&e.touches[0]?(c=e.touches[0].clientX-r.left,o=e.touches[0].clientY-r.top):(c=e.clientX-r.left,o=e.clientY-r.top);const y={x:c,y:o,id:Date.now()};x(w=>[...w,y]),setTimeout(()=>{m||p("en"),g(!1)},300),setTimeout(()=>{x(w=>w.filter(P=>P.id!==y.id))},800)}};return t.jsx(O,{children:f&&t.jsxs(i.div,{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/60 backdrop-blur-[2px] px-4 cursor-pointer overflow-hidden w-screen",style:{WebkitTapHighlightColor:"transparent"},variants:V,initial:"hidden",animate:"show",exit:"exit",onClick:j,onTouchStart:e=>{e.target===e.currentTarget&&j(e)},children:[N.map(e=>t.jsx(i.div,{className:"absolute rounded-full bg-white/20 pointer-events-none",style:{left:e.x,top:e.y,width:0,height:0},initial:{width:0,height:0,opacity:.8},animate:{width:600,height:600,opacity:0,x:-300,y:-300},transition:{duration:.6,ease:"easeOut"}},e.id)),t.jsx(i.p,{className:"fixed bottom-12 md:bottom-20 lg:bottom-24 left-0 right-0 mx-auto px-6 sm:px-8 max-w-sm md:max-w-md lg:max-w-lg text-center text-white/90 text-lg md:text-xl tracking-wide font-medium pointer-events-none",initial:{opacity:0,y:20},animate:{y:[0,-10,0],opacity:[.7,1,.7]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:d(L?"languagePrompt.clickAnywhere":"languagePrompt.tapAnywhere")}),t.jsxs(i.div,{onClick:v,onTouchStart:v,className:"relative w-[calc(100%-2rem)] max-w-sm md:max-w-md lg:max-w-lg rounded-3xl bg-white-100 shadow-2xl px-8 py-10 text-center space-y-6 border border-black-100/10 cursor-pointer overflow-hidden language-modal-responsive",animate:{y:u==="es"?-40:0,transition:{type:"spring",stiffness:300,damping:25}},variants:B,children:[t.jsxs(i.div,{className:"absolute -top-8 -left-8 flex gap-2",initial:{opacity:0,x:-50,rotate:-90},animate:{opacity:.15,x:0,rotate:0},transition:{delay:.3,duration:.8,type:"spring"},children:[t.jsx("img",{src:_,alt:"",className:"w-16 h-16 opacity-80"}),t.jsx("img",{src:E,alt:"",className:"w-14 h-14 opacity-60 mt-2"})]}),t.jsxs(i.div,{className:"absolute -top-6 -right-6 flex gap-2",initial:{opacity:0,x:50,rotate:90},animate:{opacity:.15,x:0,rotate:0},transition:{delay:.4,duration:.8,type:"spring"},children:[t.jsx("img",{src:T,alt:"",className:"w-14 h-14 opacity-70 mt-3"}),t.jsx("img",{src:A,alt:"",className:"w-16 h-16 opacity-80"})]}),t.jsx(i.div,{className:"absolute -bottom-6 -left-6",initial:{opacity:0,x:-50,y:50,rotate:-45},animate:{opacity:.12,x:0,y:0,rotate:0},transition:{delay:.5,duration:.8,type:"spring"},children:t.jsx("img",{src:C,alt:"",className:"w-16 h-16"})}),t.jsx(i.div,{className:"absolute -bottom-8 -right-8",initial:{opacity:0,x:50,y:50,rotate:45},animate:{opacity:.12,x:0,y:0,rotate:0},transition:{delay:.6,duration:.8,type:"spring"},children:t.jsx("img",{src:z,alt:"",className:"w-16 h-16"})}),t.jsx(i.div,{className:"absolute top-1/2 left-4 transform -translate-y-1/2",animate:{y:[-10,10,-10],rotate:[0,5,0,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:t.jsx("img",{src:E,alt:"",className:"w-10 h-10 opacity-10"})}),t.jsx(i.div,{className:"absolute top-1/2 right-4 transform -translate-y-1/2",animate:{y:[10,-10,10],rotate:[0,-5,0,5,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:.5},children:t.jsx("img",{src:T,alt:"",className:"w-10 h-10 opacity-10"})}),t.jsx("style",{children:`
								@keyframes wave {
									0% { transform: rotate(0deg); }
									10% { transform: rotate(14deg); }
									20% { transform: rotate(-8deg); }
									30% { transform: rotate(14deg); }
									40% { transform: rotate(-4deg); }
									50% { transform: rotate(10deg); }
									60% { transform: rotate(0deg); }
									100% { transform: rotate(0deg); }
								}
								.wave {
									display: inline-block;
									animation: wave 2.5s infinite;
									transform-origin: 70% 70%;
								}
							`}),t.jsx("h2",{className:"text-2xl font-semibold text-black-200",children:t.jsx(k,{rich:!0,content:d("languagePrompt.title"),speed:8,startDelay:0,cursor:!1},`title-${u}`)}),t.jsx("div",{className:"text-sm text-black-100/80 leading-relaxed text-left",children:d("languagePrompt.description").split(`
`).map((e,a)=>t.jsx("p",{className:"mb-4 last:mb-0",children:t.jsx(k,{rich:!0,content:e,speed:6,startDelay:30+a*40,cursor:!1},`desc-${u}-${a}`)},`${u}-${a}`))}),t.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[t.jsx(M,{size:"modal",onSelect:D}),n&&t.jsx("p",{className:"text-sm text-black-100/60",children:d("languagePrompt.closingIn").replace("{seconds}",h)})]})]})]},"language-prompt")})};export{J as default};
